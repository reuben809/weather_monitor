# Weather Monitoring Application

The Weather Monitoring Application provides real-time weather data monitoring and visualization for multiple cities. It can either use real-time data from the OpenWeatherMap API or generate mock weather data for testing purposes. The app allows users to process weather data, calculate daily summaries, visualize trends, generate alerts when temperature thresholds are exceeded, and display visualizations via Streamlit for development purposes.

## Features

- Fetch real-time weather data from the OpenWeatherMap API or generate mock weather data.
- Process and store weather data in a SQLite database.
- Generate daily summaries, including average, max, and min temperatures.
- Visualize temperature trends and weather conditions over time.
- Alert system for notifying users when the temperature exceeds a set threshold.
- Interactive visualizations using Streamlit.
- Configuration of multiple cities for monitoring.
- Ability to choose between mock and real-time data sources.

## Project Structure

```plaintext
weather_app/
├── config/
│   ├── __init__.py
│   └── config.py
├── src/
│   ├── __init__.py
│   ├── alerts.py
│   ├── data_processing.py
│   ├── data_retrieval.py
│   ├── mock_data_generator.py
│   ├── visualization.py
│   └── database/
│       ├── __init__.py
│       ├── models.py
│       ├── db_manager.py
│       └── db_operations.py
├── main.py
├── streamlit.py    
└── requirements.txt
```

### Key Files

- **main.py**: Entry point for the weather monitoring application.
- **streamlit.py**: Used for interactive visualization with Streamlit during development.
- **config/config.py**: Configuration file for cities, API keys, and thresholds.
- **src/**: Contains the core modules for data processing, database management, alerts, and visualizations.
- **requirements.txt**: List of required Python packages.

## Setup

### Prerequisites

- Python 3.8+
- SQLite for local database storage
- OpenWeatherMap API key (for real-time data mode)
- Streamlit for interactive visualization

### Clone the Repository

1. Clone the repository to your local machine:

    ```bash
    git clone https://github.com/reuben809/weather_monitor.git
    cd weather_app
    ```

2. Create and activate a virtual environment:

    ```bash
    # Create a virtual environment
    python -m venv venv

    # Activate the virtual environment
    # On Windows
    venv\Scripts\activate
    # On macOS/Linux
    source venv/bin/activate
    ```

### Install Dependencies

Install the required Python packages using:

```bash
pip install -r requirements.txt
```

### Configuration

1. Create a `.env` file in the root directory and add the OpenWeatherMap API key:

    ```plaintext
    OPENWEATHERMAP_API_KEY=your_api_key_here
    ```

2. In the `config.py` file, configure the cities you want to monitor:

    ```python
    CITIES = ['Delhi', 'Mumbai', 'Chennai', 'Bangalore', 'Kolkata', 'Hyderabad']
    TEMPERATURE_UNIT = 'celsius'  # or 'fahrenheit'
    ALERT_THRESHOLD = 30  # Celsius
    CONSECUTIVE_ALERTS = 2  # Number of consecutive updates to trigger an alert
    ```

3. Choose between mock data and real-time data in `main.py` by setting the `USE_MOCK_DATA` variable:

    ```python
    USE_MOCK_DATA = True  # For mock data
    # or
    USE_MOCK_DATA = False  # For real-time data
    ```

### Database Configuration

Since generating daily summaries requires data from a whole day, which is difficult to test without waiting for 24 hours, the app includes **two separate databases**:

1. **`mock_weather_data.db`**: Stores mock weather data generated by the mock data generator. This allows you to simulate full-day data and test the app’s functionality (like daily summaries) without needing real-time data.
2. **`real_weather_data.db`**: Stores real-time weather data fetched from the OpenWeatherMap API. This is used for real-time monitoring and provides live data.

The database will automatically initialize or update based on your configuration.

### Running the Application

1. Start the weather monitoring application:

    ```bash
    python main.py
    ```

2. Choose the data mode (mock or real-time) and duration for visualization when prompted.

3. In a new terminal, run the Streamlit app for interactive visualizations:

    ```bash
    streamlit run streamlit.py
    ```

4. Open your browser to the URL displayed in the terminal (typically `http://localhost:8501`) to interact with the weather data visualizations.

### Alerts

The application checks for temperature alerts based on a predefined threshold (e.g., 30°C). If a city's temperature exceeds the threshold for the defined number of consecutive updates, an alert is triggered. The alert message is printed to the console.

### Visualization

The app generates visualizations for temperature trends and weather conditions using Matplotlib. Visualizations are saved in the `visualizations/` directory. These visualizations can also be interactively viewed using Streamlit.

- **Temperature Trend**: Displays the temperature variation for a city over the last specified minutes.
- **Weather Distribution**: Shows the distribution of weather conditions (e.g., clear, cloudy) over the last specified minutes.

### Mock Data Generation

You can generate mock weather data for testing purposes. The mock data simulates realistic weather patterns for different cities and timestamps.

### Real-time Data Retrieval

When using real-time data, the app fetches weather data from the OpenWeatherMap API for the cities specified in the configuration. Ensure that your API key is valid by setting it in the `.env` file.

## License

This project is licensed under the MIT License - see the LICENSE file for details.

## Contact

For any inquiries, please contact:

- **Name**: Reuben Sebastian Joseph  
- **Email**: reuben.joseph010@icloud.com  
- **GitHub**: [reuben809](https://github.com/reuben809)
